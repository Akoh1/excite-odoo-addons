<odoo>
  <record model="ir.ui.view" id="project_milestone_tree">
      <field name="name">project.milestone.tree</field>
      <field name="model">project.milestone</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="start_date"/>
          <field name="end_date"/>
          <field name="next_mile"/>
          <field name="state"/>
          <field name="project_id"/>
        </tree>
      </field>
    </record>

    <record id="project_milestone_form" model="ir.ui.view">
        <field name="name">project.milestone.form</field>
        <field name="model">project.milestone</field>
        <field name="priority">2</field>
        <field name="arch" type="xml">
            <form>
                <header>
                        <button name="action_running" string="Start" type="object" class="oe_highlight" states="draft"/>

                        <button name="action_done" string="Completed" type="object" class="oe_highlight" states="running"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,running,done" attrs="{'invisible': [('project_id', '=', False)]}"/>
                    </header>
                <sheet>

                    <group>
                        <group>
                            <field name="name"/>
                            <field name="start_date"/>
                            <field name="project_id"/>
                        </group>
                        <group>
                            <field name="end_date"/>
                            <field name="next_mile"/>
                        </group>
                    </group>

                </sheet>
                <group>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="message_ids" widget="mail_thread" options='{"thread_level":1}'/>
                    </div>
                </group>
            </form>
        </field>
    </record>


    <record model="ir.actions.act_window" id="project_milestone_window">
      <field name="name">Milestone</field>
      <field name="res_model">project.milestone</field>
      <field name="view_mode">tree,form</field>
    </record>



    <menuitem name="Project Milestone" id="project_milestone_menu"
              parent="project.menu_project_config"
              action="project_milestone_window"
              groups="project.group_project_manager"
              sequence="3"/>

    <record id="view_project_project_milestone" model= "ir.ui.view">
            <field name="name">project.project.milestone.form</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">



              <xpath expr="//div[@name='button_box']" position="inside">
                    <button name="action_view_milestones" class="oe_stat_button" type="object" icon="fa-tasks">
                            <field string="Milestones" name="miles_count" widget="statinfo" />
                        </button>
              </xpath>

                
            </field>
        </record>

    <record id="view_project_milestone_task" model= "ir.ui.view">
            <field name="name">project.milestone.task.form</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">



              <xpath expr="//field[@name='project_id']" position="after">
                    <field name="milestone"/>
              </xpath>

                
            </field>
    </record>


    <record model="ir.ui.view" id="project_milestone_payment_tree">
      <field name="name">project.milestone.payment.tree</field>
      <field name="model">milestone.payment</field>
      <field name="arch" type="xml">
        <tree>
          <field name="milestone"/>
          <field name="project_id"/>
          <field name="date"/>
          <field name="amount"/>
         
        </tree>
      </field>
    </record>

    <record id="project_milestone_payment_form" model="ir.ui.view">
        <field name="name">project.milestone.payment.form</field>
        <field name="model">milestone.payment</field>
        <field name="priority">2</field>
        <field name="arch" type="xml">
            <form>
                <header>
                        <button name="action_submit" string="Submit" type="object" class="oe_highlight" states="draft"/>

                        <button name="action_approve" string="Approve" type="object" class="oe_highlight" states="submit"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft,submit,approved"/>
                    </header>
                <sheet>

                    <group>
                        <group>
                            <field name="milestone"/>
                              <field name="project_id"/>
                              <field name="date"/>
                              <field name="amount"/>
                              <field name="analytic_account"/>
                        </group>
                        <!-- <group>
                            <field name="end_date"/>
                            <field name="next_mile"/>
                        </group> -->
                    </group>

                </sheet>
                <group>
                    <div class="oe_chatter">
                        <field name="message_follower_ids"/>
                        <field name="message_ids" widget="mail_thread" options='{"thread_level":1}'/>
                    </div>
                </group>
            </form>
        </field>
    </record>


    <record model="ir.actions.act_window" id="project_milestone_payment_window">
      <field name="name">Milestone Payment</field>
      <field name="res_model">milestone.payment</field>
      <field name="view_mode">tree,form</field>
    </record>



    <menuitem name="Milestone Payment" id="project_milestone_payment_menu"
              parent="project.menu_project_config"
              action="project_milestone_payment_window"
              groups="project.group_project_manager"
              sequence="5"/>


</odoo>